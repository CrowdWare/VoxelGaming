#!/usr/bin/env sh
set -e

HERE="$(cd "$(dirname "$0")" && pwd)"

if [ -z "${VULKAN_SDK:-}" ] && [ -d "/Users/art/VulkanSDK/1.4.335.1" ]; then
  export VULKAN_SDK="/Users/art/VulkanSDK/1.4.335.1"
fi

if [ -n "${VULKAN_SDK:-}" ]; then
  export PATH="${VULKAN_SDK}/macOS/bin:${PATH}"
  export DYLD_LIBRARY_PATH="${VULKAN_SDK}/macOS/lib:${VULKAN_SDK}/macOS/MoltenVK/dylib:${DYLD_LIBRARY_PATH}"
  export VK_ICD_FILENAMES="${VULKAN_SDK}/macOS/share/vulkan/icd.d/MoltenVK_icd.json"
  export VK_LAYER_PATH="${VULKAN_SDK}/macOS/share/vulkan/explicit_layer.d"
fi

exec "${HERE}/RaidBuilder-bin"
